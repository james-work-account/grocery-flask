{% extends 'index.html' %}

{% block content %}
    <form action="{{ url_for('get_data') }}" method="post" onsubmit="return checkForm(this)">
        {% if error %}
            <label for="product" id="error-label">{{ error }}</label>
        {% endif %}
        {{ form.hidden_tag() }}
        {{ form.product.label(id="product-label") }}
        {{ form.product(minLength=3, maxLength=70) }}
        {{ form.submit() }}
    </form>

    {% if search_result %}
        <div class="results">
            {% if search_result|length > 0 %}
                {% for result in search_result %}
                    <h2>{{ result.shop_name }}</h2>
                    {{ result.result | safe }}
                {% endfor %}
            {% else %}
                <p>No results found.</p>
            {% endif %}
        </div>
    {% else %}
        <h2>Search for a Product ☝️</h2>
    {% endif %}
{% endblock %}